# 接口测试笔记

 ## fiddler 使用
 ### fiddler 是干嘛的
 * 抓包工具
 * 辅助手工测试，定位bug（区分bug是由前端还是服务端引起的）
 * web端可直接通过F12查看，对于APP应用需借助抓包工具
 ### 使用fiddler抓浏览器的包
 * fiddler默认抓取http协议的包，https需进行设置：
     1. 打开fiddler-->tools选项-->options;选择https栏-->勾选decrypt-->点击ations-->export root certificate;点击OK；
     2. 设置浏览器（chrome）：设置-->隐私设置和安全性-->安全-->证书管理-->管理证书-->导入证书；
     3. 重启fiddler；
 ### postman使用
 * 使用postman测试天气信息：注册网站“www.tianqiapi.com/” 获取接口信息测试当地城市的天气信息
 * 接口测试的三要素：地址（方式）、参数、返回值；post请求参数：body;get请求参数：parmas;put向服务器更新资源，表现形式与post相同；delete向服务器删除资源，表现形式与get相同；
 * 对比返回值
 *  postman环境变量：添加局部变量--postman-->设置；变量名引用方式，设置变量名url，通过此形式“{{url}}”引用；
 *  postman与fiddler同时使用，注意设置postman的代才可以通过fiddler抓取到posman的模拟请求；
 *  postman--tests--断言:
 ```javascript
 /*
1. 断言
2. 获取返回值
*/

// 1. 断言状态码Status Code
pm.test("请求成功", function () {
    pm.response.to.have.status(200);
});

// 2. 断言返回值字段JSON value check
pm.test("城市返回值", function () {
    var jsonData = pm.response.json();//获取所有返回值
    pm.expect(jsonData.city).to.eql("济南");
});
pm.test("天气", function () {
    var jsonData = pm.response.json();//获取所有返回值
    // var patt = /我们/;
    // patt.test(pm.expect(jsonData.data[0].wea));
    pm.expect(jsonData.data[0].wea).to.eql("多云转阴");
});
 ```
 
